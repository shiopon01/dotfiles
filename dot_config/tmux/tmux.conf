##################
## TMUX SETTING ##
##################

# 256色使えるようにする
# set-option -g default-terminal xterm-256color

# Powerline

set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'
# run-shell "powerline-daemon -q"
# source "/usr/local/lib/python3.7/site-packages/powerline/bindings/tmux/powerline.conf"

# バッファの上限を10万にする
set-option -g history-limit 100000

# 番号基準値を変更
set-option -g base-index 1

# マウス操作を有効にする
#set-option -g mouse on
#bind-key -n WheelUpPane if-shell -Ft= "#{?pane_in_mode,1,#{alternate_on}}" "send-keys -M" "copy-mode"

# 通知の設定
set-option -g display-time 2000
set-option -g display-panes-time 1000

# センタライズ(主にウィンドウ番号など)
set-option -g status-justify left

###############
## COPY-MODE ##
###############

# vi キーバインド
set-window-option -g mode-keys vi

# Prefix+v でコピーモード開始
bind-key v copy-mode \; display "Copy mode!"
#bind-key -t vi-copy v begin-selection

# Prefix+Enter/y でコピー
# bind -t copy-mode-vi y     copy-pipe "reattach-to-user-namespace pbcopy"
# bind -t copy-mode-vi Enter copy-pipe "reattach-to-user-namespace pbcopy"

# Prefix+p でペースト
bind-key p paste-buffer

##############
## KEY BIND ##
##############

## prefix key => C-q
set-option -g prefix C-q
unbind C-b
unbind i
unbind m
unbind x
unbind M-1
unbind M-2
unbind M-3
unbind M-4
unbind M-5

# ウィンドウ
bind -n C-M-n next-window
bind -n C-M-p previous-window
bind -n C-M-i last-window
bind -n C-M-c new-window
bind -n C-M-k kill-window

# ペイン
# bind -n C-M-- split-window -h # C-M-- うごかん
bind -n C-M-] split-window -h
bind -n C-M-\\ split-window -v
bind -n C-M-x confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind -n C-M-h select-layout main-horizontal \; display-message "layout-2"
bind -n C-M-j select-layout main-vertical \; display-message "layout-1"
bind -n C-M-g select-layout tiled \; display-message "layout-3"
bind -n C-M-o select-pane -t :.+

# reload
bind r source-file ~/.tmux.conf \; display-message "Reloaded."

set-option -g synchronize-panes off
bind e setw synchronize-panes on
bind E setw synchronize-panes off

bind o run-shell "open #{pane_current_path}"

# vimのキバインドでペインを移動する
#bind h select-pane -L
#bind j select-pane -D
#bind k select-pane -U
#bind l select-pane -R

# vimのキーバインドでペインをリサイズする
#bind -r H resize-pane -L 5
#bind -r J resize-pane -D 5
#bind -r K resize-pane -U 5
#bind -r L resize-pane -R 5

################
## STATUS BAR ##
################

# ステータスバーを1秒毎に描画し直す
set-option -g status-interval 1

# メッセージ/プロンプト
# set-option -g message-fg   colour115
# set-option -g message-bg   colour24
# set-option -g message-attr bright

# スクロールの右上やコピーモード選択範囲のスタイル
# set-window-option -g mode-fg   colour146

# 256色パレットの色を付けると表示が変になる?(reverseすると回避可能?)
# set-window-option -g mode-bg   colour62
# set-window-option -g mode-attr reverse,bold

# ウィンドウマネージャ向けのタイトル
# set-option -g set-titles on
# set-option -g set-titles-string "[tmux]\"#W\" (#I/#P) @ #H"

# ステータスバーを下に配置
# set-option -g status-position bottom

# ステータスバーの色設定
# set-option -g status-fg   default
# set-option -g status-bg   default
# set-option -g status-attr default

# set-option -g status-left-fg   default
# set-option -g status-left-bg   default
# set-option -g status-left-attr default

# set-option -g status-right-fg   default
# set-option -g status-right-bg   default
# set-option -g status-right-attr bold

# 左右のステータスバーの長さを決定する
# set-option -g status-left-length 90
# set-option -g status-right-length 90

# 左ステータス(空白のみ)
#set-option -g status-left "#[fg=colour218,bold]#H #[default] "
# set-option -g status-left "  "

# 右ステータス(Wi-Fi、バッテリー残量、現在時刻)
# set-option -g status-right '#[fg=colour211]#(get_ssid) #(battery -c tmux) #[fg=colour81][%Y-%m-%d(%a) %H#[default,fg=colour81,blink]:#[default,fg=colour81]%M]'

# ウィンドウ一覧部における現在アクティブなウィンドウの項目の表示
# set-window-option -g window-status-current-fg   colour255
# set-window-option -g window-status-current-bg   colour18
# set-window-option -g window-status-current-attr default
# set-window-option -g window-status-current-format " #I #[default,fg=colour81]#W#[default]:#{pane_current_path} "

# ウィンドウ一覧部における現在非アクティブなウィンドウの項目の表示
# set-window-option -g window-status-fg   white
# set-window-option -g window-status-bg   default
# set-window-option -g window-status-attr default
# set-window-option -g window-status-format " #I #W:#{pane_current_path} "

